---
title: "Transition Risk Stress Testing Suite: Data Overview"
output: html_document
---

# Transition Risk Stress Testing Suite: Data Overview

This vignette provides an overview of the datasets used in the Transition Risk Stress Testing Suite. We'll explore the documentation and structure of each dataset, and show how to access and prepare the data for use in the model.

## Table of Contents

- [Transition Risk Stress Testing Suite: Data Overview](#transition-risk-stress-testing-suite-data-overview)
  - [Table of Contents](#table-of-contents)
  - [Introduction](#introduction)
  - [Datasets](#datasets)
    - [Assets Test Data](#assets-test-data)
      - [Accessing the Data](#accessing-the-data)
      - [Data Structure](#data-structure)
      - [Sample Data](#sample-data)
    - [Financial Features Test Data](#financial-features-test-data)
      - [Accessing the Data](#accessing-the-data-1)
      - [Data Structure](#data-structure-1)
      - [Sample Data](#sample-data-1)
    - [NGFS Carbon Price Test Data](#ngfs-carbon-price-test-data)
      - [Accessing the Data](#accessing-the-data-2)
      - [Data Structure](#data-structure-2)
      - [Sample Data](#sample-data-2)
    - [Scenarios Test Data](#scenarios-test-data)
      - [Accessing the Data](#accessing-the-data-3)
      - [Data Structure](#data-structure-3)
      - [Sample Data Matching Specific Scenarios](#sample-data-matching-specific-scenarios)
  - [Data Preparation](#data-preparation)
  - [Conclusion](#conclusion)

---

## Introduction

The Transition Risk Stress Testing Suite relies on several key datasets to perform analyses. Understanding the structure and content of these datasets is crucial for preparing your own data and interpreting the model's outputs.

---

## Datasets

### Assets Test Data

This dataset contains data about company assets, including production, technology, and geographical details.

#### Accessing the Data

```{r}
# Load the package
library(trisk.model)

# Load the dataset
data(assets_testdata, package = "trisk.model")

# View documentation
help(assets_testdata, package = "trisk.model")
```

#### Data Structure

```{r}
str(assets_testdata)
```

#### Sample Data

```{r}
head(assets_testdata)
```

---

### Financial Features Test Data

This dataset contains financial metrics necessary for calculating stress test outputs.

#### Accessing the Data

```{r}
# Load the dataset
data(financial_features_testdata, package = "trisk.model")

# View documentation
help(financial_features_testdata, package = "trisk.model")
```

#### Data Structure

```{r}
str(financial_features_testdata)
```

#### Sample Data

```{r}
head(financial_features_testdata)
```

---

### NGFS Carbon Price Test Data

This dataset provides carbon pricing data used in the stress test scenarios.

#### Accessing the Data

```{r}
# Load the dataset
data(ngfs_carbon_price_testdata, package = "trisk.model")

# View documentation
help(ngfs_carbon_price_testdata, package = "trisk.model")
# Extract and convert the .Rd file into a format that can be printed in the vignette
doc <- tools::Rd2txt("man/ngfs_carbon_price_testdata.Rd")
cat(doc)
```

#### Data Structure

```{r}
str(ngfs_carbon_price_testdata)
```

#### Sample Data

```{r}
head(ngfs_carbon_price_testdata)
```

---

### Scenarios Test Data

This dataset contains scenario-specific data, including price paths, capacity factors, and other relevant information.

#### Accessing the Data

```{r}
# Load the dataset
data(scenarios_testdata, package = "trisk.model")

# View documentation
help(scenarios_testdata, package = "trisk.model")
```

#### Data Structure

```{r}
str(scenarios_testdata)
```

#### Sample Data Matching Specific Scenarios

We'll focus on the scenarios matching the following test:

```{r}
baseline_scenario <- "NGFS2023GCAM_CP"
target_scenario <- "NGFS2023GCAM_NZ2050"
scenario_geography <- "Global"

# Filter scenarios_testdata for the specified scenarios and geography
filtered_scenarios <- subset(
  scenarios_testdata,
  scenario %in% c(baseline_scenario, target_scenario) & scenario_geography == scenario_geography
)

# Display the unique scenarios available
unique(filtered_scenarios$scenario)
```

---

## Data Preparation

Before running the model, ensure that your datasets are correctly formatted and contain the necessary information. Use the provided test datasets as templates for your own data.

For the scenarios, make sure that the `baseline_scenario` and `target_scenario` you plan to use are present in your `scenarios_testdata`, and that they correspond to the `scenario_geography` you are analyzing.

---

## Conclusion

Understanding the datasets and their structures is essential for effectively using the Transition Risk Stress Testing Suite. By exploring the provided test data and documentation
